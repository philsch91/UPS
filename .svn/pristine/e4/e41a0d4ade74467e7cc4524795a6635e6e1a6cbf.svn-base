using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Net;
using System.Web.Script.Serialization;
using System.Collections;
using System.Collections.Specialized;

namespace UPS {
    public class MonthBooking : Booking {

        private int hours;
        private int percentage;

        public int Hours {
            get { return this.hours; }
            set {
                if(value < 1 || value > 400) {
                    throw new FormatException("Value must be between 0 and 401");
                }
                this.hours = value;
            }
        }
        public int Percentage {
            get { return this.percentage; }
            set {
                if(value < 1 || value > 100) {
                    throw new FormatException("Value must be between 0 and 101");
                }
                this.percentage = value;
            }
        }

        public MonthBooking() {
        }

        public string Send() {
            /*
            System.Windows.MessageBox.Show(
                "hours:" + this.hours.ToString() + Environment.NewLine +
                "percentage:" + this.percentage.ToString());
            */

            double splittedHours = ((double)this.hours / 100) * this.percentage;
            System.Windows.MessageBox.Show("Splitted hours: " + splittedHours.ToString());

            
            DateTime today = DateTime.Today;
            int year = today.Year;
            int month = today.Month;

            /*
            //=== for last month ===
            int month = today.Month - 1;
            if(month <= 0) {
                year = year - 1;
                month = month + 1;
            }
            //DateTime lastMonth = new DateTime(year, month, today.Day);
            //======================
            */

            int days = DateTime.DaysInMonth(year, month);
            System.Windows.MessageBox.Show("Days in Month: " + days);

            int day = 1;
            while(day <= days) {
                DateTime dayInMonth = new DateTime(year, month, 1);
                string unixTimestamp = dayInMonth.Subtract(new DateTime(1970, 1, 1)).TotalSeconds.ToString();
                string timestamp = unixTimestamp + "000";
                System.Windows.MessageBox.Show(dayInMonth.ToString() + Environment.NewLine + timestamp);
                day++;
            }

            return "";

            string response = "";
            //response = this.InternalSend(timestamp);

            return "";
        }
    }
}
